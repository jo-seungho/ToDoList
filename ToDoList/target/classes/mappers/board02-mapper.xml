<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="board02Mapper">

	<resultMap id="board02ResultSet" type="board02">
		<result column="BOARD_NO" property="boardNo" />
		<result column="BOARD_TITLE" property="boardTitle" />
		<result column="BOARD_DESC" property="boardDesc" />
		<result column="CREATE_DATE" property="createDate" />
		<result column="STATUS" property="status" />
		<result column="USER_NO" property="userNo" />
		<result column="CATEGORY" property="category" />
		<result column="R" property="rownum" />
		<result column="USER_NAME" property="userName" />
	</resultMap>


	<select id="selectBoardList" parameterType="map" resultMap="board02ResultSet">
	<![CDATA[
		SELECT *
		  FROM (
		        SELECT ROWNUM R, A.*
		          FROM (
		      	        SELECT B.*, USER_NAME 
		                  FROM BOARD B
		                  JOIN MEMBER M ON B.USER_NO = M.USER_NO 
		                ) A
		         WHERE ROWNUM <= (SELECT COUNT(*) FROM BOARD)  
		        )
		 WHERE R >= #{start} AND R <= #{end}
		   AND STATUS = 'Y'
    ]]>
	</select>


	<select id="selectTotalCount" resultType="_int">
		SELECT COUNT(*)
		  FROM BOARD
	</select>
</mapper>